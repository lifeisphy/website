<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Notes</title>
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"> -->
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/content.css">
  <link rel="stylesheet" href="/css/toolbar.css">
</head>

<body>
  <div id="sidebar">

    <% function renderEntries(entries) { %>
      <% entries.forEach(function(entry) { %>
        <% if (entry.isfile) { %>
          <div class="sidebar-item">
            <a href="<%= entry.path %>" class="sidebar-item" data-partial="true">
              <%= entry.filename.split('.md')[0] %>
            </a>
          </div>
          <% } else { %>
            <div class="sidebar-item" onclick="toggleSubItems('<%= entry.id %>')">
              <a href="<%= entry.path %>" data-partial="true">üìÅ <%= entry.directory %></a>
            </div>
            <div id="<%= entry.id %>" class="sidebar-subitems" style="display: none;">
              <% renderEntries(entry.children); %> <!-- Recursive call -->
            </div>
            <% } %>
              <% }); %>
                <% } %>

                  <% renderEntries(file_tree); %> <!-- Initial call -->

                    <div id="item1" class="sidebar-subitems">
                      <div class="sidebar-item"> File 1.1</div>
                      <div class="sidebar-item"> File 1.2</div>
                    </div>
  </div>
  <button id="toggleButton">‚â°</button>
  <div id="content">
    <%- content || 'Welcome to the notes app!' %>
  </div>
  <button id="toolbar-button">üîß</button>
  <div id="toolbar">
    <div class="toolbar-section">
      <span>Fontsize</span>
      <button id="fontsize-plus" class="toolbar-btn">+</button>
      <button id="fontsize-minus" class="toolbar-btn">-</button>
    </div>
    <button id="bgpicChangeButton" class="toolbar-btn">Change Background Picture</button>
    <div class="toolbar-section">
      <label id="bgmName"></label><br>
      <button id="bgmChangeButton" class="toolbar-btn">üé≤</button>
      <button id="prevBGMButton" class="toolbar-btn">‚èÆ</button>
      <button id="bgmPlayButton" class="toolbar-btn">‚ñ∂</button>
      <button id="nextBGMButton" class="toolbar-btn">‚è≠</button>
    </div>
  </div>
  <audio id="bgm" loop>
    <source src="" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
</body>
<script>
  window.bgmList = <%- JSON.stringify(bgmList || []) %>;
  window.SpecifiedScreenWidth = <%- JSON.stringify(SpecifiedScreenWidth || 600) %>;
  window.pictureList = <%- JSON.stringify(pictureList || []) %>;
</script>
<script src="/js/notes_main.js"></script>

</html>